<link rel="import" href="../my-album/my-album.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../paper-audio-player/paper-audio-player.html">


<dom-module is="hindi-album">
    <style is="custom-style">
    
        paper-audio-player.orange {
            --paper-audio-player-color: #F05C38;
        }
        
        paper-audio-player.blue {
            --paper-audio-player-color: #90D9D6;
        }
        
        paper-audio-player.broken {
            --paper-audio-player-color: #43BBF9;
        }
        
        #footer {
            position: fixed;
            left: 0px;
            bottom: 0px;
            height: 50px;
            margin: 10px 0;
            padding-right: 10px;
            padding-left: 10px;
            width: 98%;
        }
    
    </style>
    
    <template>
        <iron-ajax auto url="/album/" last-response="{{data}}"
            handle-as="json">
        </iron-ajax>
        
        <template is="dom-repeat" items="{{data}}">
            <my-album item="{{item}}" selected-song="{{selectedSong}}"></my-album>
        </template>
        <paper-audio-player id="footer" src="http://nadikun.com/audio/demo.mp3"
                title="Pink Shades - O+PNR" color="#F05C38"></paper-audio-player>
    </template>
</dom-module>
<script>
Polymer({
    is: "hindi-album",
    properties: {
        data: {
            type: String,
        },
        selectedSong : {
            type : Object,
            observer : 'songChnaged'
        }

    },
    songChnaged: function(
        data) {
        this.$['footer'].src= data.fields.song_url;
        this.$['footer'].title = data.fields.song_name;
    }

});
</script>
